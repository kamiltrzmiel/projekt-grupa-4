var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},a=e.parcelRequire9267;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in o){var a=o[e];delete o[e];var n={id:e,exports:{}};return t[e]=n,a.call(n.exports,n,n.exports),n.exports}var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(e,t){o[e]=t},e.parcelRequire9267=a),a("7QdEN"),a("afPuq"),a("5KvMa");var n=a("j2qdV"),d=a("7zgG6"),i=a("c7JiP"),s=a("BGpcc");const l=document.getElementById("footer-dialog"),c=document.getElementById("hide"),r=document.getElementById("show"),m=document.querySelector("body");(0,d.reloadHeader)(),(0,d.setRegisterAndSignUp)(),r.addEventListener("click",(()=>{m.style.overflow="hidden",l.showModal()}));const p=()=>{m.style.overflow="auto",l.close()};c.addEventListener("click",p),l.addEventListener("close",p);const _=document.getElementById("hide-modal"),v=document.getElementById("modal-backdrop");_.addEventListener("click",(()=>{v.classList.toggle("hidden")}));const u=document.getElementById("posters");(0,n.moviesLoading)(),setTimeout((()=>{(async e=>{try{const t=(await i.default.fetchTrendingMovies(e)).data.results;(0,s.render)(t,u,!0)}catch(e){console.log(e)}})(1)}),250),a("5KvMa"),a("9JNWF");i=a("c7JiP");d=a("7zgG6");const f=new class{#e=[];constructor(){const e=JSON.parse(localStorage.getItem("movies"));this.#e=e||[]}checkMovie(e,t,o){e.type=o;for(let a=0;a<t.length;a++)if(+t[a].id==+e.id){if(t[a].type===o)return;return this.#e[a].type=o,void localStorage.setItem("movies",JSON.stringify(this.#e))}this.#e.push(e),localStorage.setItem("movies",JSON.stringify(this.#e))}addMovie(e,t){return{id:e.id,title:e.title,poster_path:e.poster_path,vote_average:e.vote_average,release_date:e.release_date,genre_ids:e.genres.map((e=>e.id)),type:t}}},g=async(e,t)=>{console.log(e);const o=await(0,d.getUser)();if(o){const a=f.addMovie(e,t);console.log(a),(0,d.saveMovieToDatabase)(a,o),alert(`Movie saved to ${t} successfully!`)}else alert("Please first login")},h=e=>{const t=document.getElementById("modal-watched"),o=document.getElementById("modal-queue");t.addEventListener("click",(async()=>await g(e,"watched"))),o.addEventListener("click",(async()=>await g(e,"queued")))};document.getElementById("posters").addEventListener("click",(e=>{const t=document.getElementById("modal-backdrop");(async e=>{try{const o=(await i.default.fetchMovieById(e)).data;console.log(o);const a=o.genres.map((e=>e.name)).join(", ");o.poster_path?o.poster_path=`https://image.tmdb.org/t/p/w500/${o.poster_path}`:o.poster_path=placeholder,t.innerHTML=`<div class="container">\n      <div id="modal-wrapper" class="modal">\n       <button id="hide-modal" class="footer-modal__closeBtn">\n              x\n            </button>\n                <img id="modal-image" src="${o.poster_path}" class="modal__image" alt="${o.title}" />\n                <div id="modal-text" class="modal__text">\n                  <div class="modal__description">\n                    <h3 class="modal__title">${o.title}</h3>\n                  </div>\n                  <div id="modal-info" class="modal__info">\n                    <p class="modal__info--classification">Vote / Votes</p>\n                    <p class="modal__info--detailed">\n                      <span class="modal__info--score">${o.vote_average.toFixed(1)}</span> /\n                      <span class="modal__info--score--second">${o.vote_count}</span>\n                    </p>\n                  </div>\n                  <div id="modal-info" class="modal__info">\n                    <p class="modal__info--classification">Popularity</p>\n                    <p class="modal__info--detailed">${o.popularity.toFixed(0)}</p>\n                  </div>\n                  <div id="modal-info" class="modal__info">\n                    <p class="modal__info--classification">Original title</p>\n                    <p class="modal__info--detailed">${o.original_title}</p>\n                  </div>\n                  <div id="modal-info" class="modal__info">\n                    <p class="modal__info--classification">Genre</p>\n                    <p class="modal__info--detailed">${a}</p>\n                  </div>\n                  <article id="modal-article" class="modal__article">\n                    <h4 class="modal__article--title">ABOUT</h4>\n                    <p id="modal-article-description" class="modal__article--description">\n                      ${o.overview}\n                    </p>\n                  </article>\n                  <div class="modal__buttons">\n                    <button id="modal-watched" class="modal__btn--watched">ADD TO WATCHED</button>\n                    <button id="modal-queue" class="modal__btn--queued">ADD TO QUEUE</button>\n                  </div>\n                </div>\n              </div>\n            </div>`;document.getElementById("hide-modal").addEventListener("click",(()=>t.close())),h(o)}catch(e){console.log(e)}})(e.target.parentNode.dataset.id),t.showModal()}));
//# sourceMappingURL=index.f48a5875.js.map
